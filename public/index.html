<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IVANOVA WORLD | The Core Ecosystem</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: '#66FCF1', // اللون الأساسي
                        brandDark: '#45b2aa',
                        darkBg: '#050505', // خلفية أغمق
                        panel: '#0A0A0A', // لون الكتل
                        borderSubtle: 'rgba(255, 255, 255, 0.05)'
                    },
                    fontFamily: {
                        sans: ['Cairo', 'sans-serif'],
                        mono: ['Rajdhani', 'sans-serif']
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                        'noise-pattern': "url('https://www.transparenttextures.com/patterns/stardust.png')" // نمط خفيف جداً للخلفية
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #050505; color: #e2e8f0; overflow-x: hidden; font-family: 'Cairo', sans-serif; }
        /* تأثير الخلفية المستوحى من التصميم */
        .bg-texture {
            background-color: #050505;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23ffffff' fill-opacity='0.02' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
        }
        
        /* تصميم الكتل الداكنة */
        .dark-panel {
            background: #0A0A0A;
            border: 1px solid rgba(255, 255, 255, 0.03);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }

        /* الأزرار الفاخرة */
        .btn-premium {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(102, 252, 241, 0.3);
        }
        .btn-premium:hover {
            background-color: rgba(102, 252, 241, 0.1);
            border-color: #66FCF1;
            box-shadow: 0 0 15px rgba(102, 252, 241, 0.2);
        }

        .hidden-view { display: none !important; }
        .fade-in { animation: fadeIn 1s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-texture font-sans">

    <div id="loader-screen" class="fixed inset-0 z-[100] bg-[#050505] flex flex-col items-center justify-center transition-opacity duration-700">
        <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-brand mb-4"></div>
        <p id="status-text" class="text-brand font-mono text-xs tracking-[0.2em] animate-pulse">INITIALIZING WORLD CORE...</p>
    </div>

    <nav class="fixed w-full z-50 top-0 p-6 fade-in" style="animation-delay: 0.2s;">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img src="https://yubvsehgmnudhcqwajae.supabase.co/storage/v1/object/public/Ivanova%20logo/20260203_204854.png" class="w-10 h-10 object-contain opacity-80">
                <span class="font-[Rajdhani] font-bold text-2xl tracking-[0.2em] text-white">IVANOVA</span>
            </div>

            <div class="flex items-center gap-4">
                <div class="text-right hidden md:block">
                    <div id="username-display" class="text-white font-bold text-sm font-mono dir-ltr tracking-wider">LOADING...</div>
                    <div class="text-gray-500 text-[10px] font-mono tracking-widest uppercase">Citizen ID</div>
                </div>
                <div id="user-avatar-initial" class="w-12 h-12 rounded-full bg-gradient-to-tr from-brandDark to-brand flex items-center justify-center text-black font-bold font-[Rajdhani] text-xl shadow-lg shadow-brand/20 cursor-pointer hover:scale-105 transition">
                    ?
                </div>
                 <button onclick="app.logout()" class="hidden md:block ml-4 text-red-500 hover:text-red-400 text-xs font-mono uppercase tracking-wider">
                    <i class="fas fa-power-off ml-1"></i> Logout
                </button>
            </div>
        </div>
    </nav>

    <main class="relative z-10 flex-1 flex flex-col justify-center items-center max-w-7xl mx-auto w-full px-6 pt-24 pb-12">

        <section class="text-center mb-20 fade-in" style="animation-delay: 0.4s;">
            <h6 class="text-brand font-mono text-xs tracking-[0.3em] uppercase mb-4">System Sovereignty V1.0</h6>
            <h1 class="text-6xl md:text-8xl font-bold text-white font-[Rajdhani] tracking-wide mb-6">
                IVANOVA <br class="md:hidden"> WORLD
            </h1>
            <div class="h-1 w-24 bg-brand mx-auto mb-6 opacity-50"></div>
            <p class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed font-light">
                النظام البيئي الرقمي المتكامل. بوابتك نحو السيادة، التواصل المشفر، والموارد اللامركزية.
            </p>
        </section>

        <section class="grid md:grid-cols-2 gap-8 w-full fade-in" style="animation-delay: 0.6s;">
            
            <div class="dark-panel p-10 rounded-xl relative group overflow-hidden">
                <div class="absolute right-0 bottom-0 opacity-5 transform translate-x-1/4 translate-y-1/4 group-hover:scale-110 transition-transform duration-700">
                    <i class="fas fa-cube text-[15rem] text-white"></i>
                </div>
                
                <div class="relative z-10">
                    <i class="fas fa-rocket text-4xl text-brand mb-6"></i>
                    <h2 class="text-3xl font-bold text-white font-[Rajdhani] mb-2 tracking-wider">IVANOVA SPACE</h2>
                    <p class="text-gray-400 mb-8 text-sm leading-relaxed h-20">
                        المستودع الرقمي الآمن. قم بتخزين ملفاتك، وإدارة تطبيقاتك في بيئة سحابية خاصة مشفرة.
                    </p>
                    
                    <a href="space.html" class="btn-premium inline-flex items-center gap-3 px-8 py-4 bg-transparent text-white font-bold rounded-lg text-sm tracking-widest uppercase font-mono group-hover:text-brand transition-colors">
                        <span>Enter Space</span>
                        <i class="fas fa-arrow-left text-xs group-hover:-translate-x-2 transition-transform"></i>
                    </a>
                </div>
            </div>

            <div class="dark-panel p-10 rounded-xl relative group overflow-hidden">
                <div class="absolute right-0 bottom-0 opacity-5 transform translate-x-1/4 translate-y-1/4 group-hover:scale-110 transition-transform duration-700">
                    <i class="fas fa-network-wired text-[15rem] text-white"></i>
                </div>

                <div class="relative z-10">
                    <i class="fas fa-users-rays text-4xl text-blue-400 mb-6"></i>
                    <h2 class="text-3xl font-bold text-white font-[Rajdhani] mb-2 tracking-wider">COMIO PLATFORM</h2>
                    <p class="text-gray-400 mb-8 text-sm leading-relaxed h-20">
                        الجيل القادم من التواصل الاجتماعي. منصة مشفرة للنشر، التفاعل، وبناء المجتمعات الرقمية.
                    </p>
                    
                    <a href="comio.html" class="btn-premium inline-flex items-center gap-3 px-8 py-4 bg-transparent text-white font-bold rounded-lg text-sm tracking-widest uppercase font-mono hover:text-blue-400 hover:border-blue-400/50 hover:bg-blue-400/10 transition-colors">
                         <span>Launch Comio</span>
                        <i class="fas fa-arrow-left text-xs group-hover:-translate-x-2 transition-transform"></i>
                    </a>
                </div>
            </div>

        </section>

    </main>

    <footer class="text-center py-8 text-gray-600 text-[10px] tracking-[0.3em] uppercase font-mono fade-in" style="animation-delay: 0.8s;">
        © 2026 Ivanova Strategic Systems. The World is Yours.
    </footer>

    <script>
        const app = {
            supabase: null,
            currentUser: null,

            init: async () => {
                console.log("World Initializing...");
                app.supabase = supabase.createClient(
                    'https://yubvsehgmnudhcqwajae.supabase.co',
                    'sb_publishable_jx6I4sjazjPPYFYldG_ZtA_MQc172DC'
                );

                // 1. التحقق من الجلسة
                const { data: { session } } = await app.supabase.auth.getSession();
                
                if (!session) {
                    // إذا لم يكن مسجلاً، اطرده لصفحة الدخول
                    console.log("Unauthorized. Redirecting to gateway.");
                    window.location.href = 'login.html';
                    return;
                }

                // 2. جلب بيانات المستخدم وتحديث الواجهة
                await app.handleLogin(session.user);
                app.hideLoader();

                // 3. الاستماع للتغييرات (للحماية الإضافية)
                app.supabase.auth.onAuthStateChange((event, session) => {
                    if (!session && window.location.pathname.includes('index.html')) {
                         window.location.href = 'login.html';
                    }
                });
            },
            
            hideLoader: () => {
                const loader = document.getElementById('loader-screen');
                if(loader) {
                    loader.classList.add('opacity-0');
                    setTimeout(() => loader.classList.add('hidden-view'), 700);
                }
            },

            handleLogin: async (user) => {
                let username = user.user_metadata.full_name || 'Operative';
                let initial = username.charAt(0).toUpperCase();

                // تحديث الاسم في الأعلى
                document.getElementById('username-display').innerText = username;
                // تحديث الحرف الأول في الدائرة
                document.getElementById('user-avatar-initial').innerText = initial;
            },

            logout: async () => {
                await app.supabase.auth.signOut();
                window.location.href = 'login.html';
            }
        };

        window.onload = app.init;
    </script>
</body>
</html>
